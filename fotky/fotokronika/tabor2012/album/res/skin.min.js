/* 
	Turtle skin by Laszlo Molnar (C) 2011
	version 3.5.1
*/
var DEBUG=!1,UNDEF="undefined",OBJECT="object",NOLINK="javascript:void(0)",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash";String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.trunc=function(b){if(this.length<=b)return this.toString();var b=this.substring(0,b-1),m=b.lastIndexOf(" ");return(6<m&&20>b.length-m?b.substring(0,m):b)+"..."};
String.prototype.startsWith=function(b){return 0===this.indexOf(b)};String.prototype.endsWith=function(b){return this.substring(this.length-b.length)===b};String.prototype.getExt=function(){var b=this.lastIndexOf(".");return 0>=b||b>=this.length-1?"":this.substring(b+1).toLowerCase()};String.prototype.fixExtension=function(){return this.replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")};
var htmlregex=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']];String.prototype.cleanupHTML=function(){for(var b=this,m=htmlregex.length-1;0<=m;m--)b=b.replace(htmlregex[m][0],htmlregex[m][1]);return b};String.prototype.stripHTML=function(){return this.replace(/<\/?[^>]+>/gi,"")};String.prototype.stripQuote=function(){return this.replace(/\"/gi,"&quot;")};
String.prototype.appendSep=function(b,m){return(this.length?this+(m||" &middot; "):"")+b};String.prototype.rgb2hex=function(){if("#"===this.charAt(0))return this;for(var b,m=this.match(/\d+/g),o="",u=0;u<m.length&&3>u;u++)b=parseInt(m[u]).toString(16),o+=(2>b.length?"0":"")+b;return"#"+o};String.prototype.template=function(b){if(!b)return this;for(var m=this,o=0;o<b.length;o++)m=m.replace(RegExp("\\{"+o+"\\}","gi"),b[o]);return m};
Math.minMax=function(b,m,o){m=isNaN(m)?parseFloat(m):m;return m<b?b:m>o?o:m};var getCoords=function(b){return b.touches&&0<b.touches.length?{x:Math.round(b.touches[0].clientX),y:Math.round(b.touches[0].clientY)}:null!=b.clientX?{x:Math.round(b.clientX),y:Math.round(b.clientY)}:{x:UNDEF,y:UNDEF}};
checkFlash=function(b){var m=navigator,o=[1,0,0],u,b=b?b.split("."):[0,0,0];if(typeof m.plugins!=UNDEF&&typeof m.plugins[SHOCKWAVE_FLASH]==OBJECT){if((u=m.plugins[SHOCKWAVE_FLASH].description)&&!(typeof m.mimeTypes!=UNDEF&&m.mimeTypes[FLASH_MIME_TYPE]&&!m.mimeTypes[FLASH_MIME_TYPE].enabledPlugin))u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),
10):0}else if(typeof window.ActiveXObject!=UNDEF)try{var K=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(K&&typeof K.GetVariable!=UNDEF&&(u=K.GetVariable("$version")))u=u.split(" ")[1].split(","),o[0]=parseInt(u[0],10),o[1]=parseInt(u[1],10),o[2]=parseInt(u[2],10)}catch(aa){}return o[0]>b[0]||o[0]==b[0]&&o[1]>b[1]||o[0]==b[0]&&o[1]==b[1]&&o[2]>=b[2]};
(function(b){var m=b.browser.msie&&"ms"||b.browser.webkit&&"webkit"||b.browser.mozilla&&"moz"||b.browser.opera&&"o"||"",o,u=!1,K,aa=1;log=function(a){DEBUG&&!u&&(o||(o=b('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){u=!0},function(){u=!1}).appendTo("body")),a===K?o.children(":first").empty().html(K+" ("+ ++aa+")"):(b('<div style="height:2em;overflow:hidden;">'+
a+"</div>").prependTo(o),K=a,aa=1))};typeof Search!==UNDEF&&(Search.start=function(a){var d=a&&a.tagName&&a.nodeName?"FORM"===a.nodeName?b(a).find("input[type=search]").val().trim():b(a).text().trim():String(a),c=b("<div>",{"class":"searchresults"}),e=0,f,h,g,p,j,i,k=RegExp("("+d.replace(/\s/g,"|")+")","gi");if(Search.data&&b.isArray(Search.data)&&Search.data.length&&d&&!(2>d.length)){c.append(b("<h4>",{html:Search.text.headln+" &quot;<b>"+d+"</b>&quot;"}));for(f=0;f<Search.data.length;f++)for(h=
0;h<Search.data[f][1].length;h++)if(k.test(Search.data[f][1][h])){i=Search.data[f][1][h].split(Search.sep);j=Search.rootPath&&"."!==Search.rootPath?Search.rootPath+"/":"";g=j+(Search.data[f][0]?Search.data[f][0]+"/":"");p=b("<a>",{href:g+(i[0].startsWith("#")?Search.indexName:"")+i[0]}).on("click",function(){window.location.href.endsWith(b(this).attr("href"))||F("lastSearch",d,8);return!0}).appendTo(c);p.append(b("<aside>").append(b("<img>",{src:i[0].startsWith("#")?i[0].toLowerCase().match(/.+\.(jpg|png)$/)?
g+"thumbs/"+i[0].substr(1).replace(/%25/g,"%"):j+"res/unknown.png":g+Search.folderThumb})));i[1]&&p.append(b("<h5>").append(i[1]));i[2]&&i[2]!==i[1]&&p.append(b("<p>").append(i[2].trunc(192)));for(g=3;g<i.length;g++)i[g]&&i[g].trim().length&&p.append(b("<p>").append(i[g].trunc(192)));e++}b(a).parents(".hint:first").fadeOut(100,function(){b(this).remove()});e?setTimeout(function(){c.find("a:first").focus()},250):c.append(b("<p>",{text:Search.text.notFound}));b("body").addModal(c,{uid:"searchres",darkenBackground:!1,
title:Search.text.title});return!1}},Search.init=function(){var a=F("lastSearch");a&&a.length&&(F("lastSearch",null),Search.start(a))});b.fn.logEvents=function(a){var d=a||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus, load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend";return this.each(function(){b(this).on(d,function(a){a.target.id!=="log"&&log(a.type+
' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+a.target.nodeName.toLowerCase()+"</b>"+(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?":"+a.relatedTarget.id:"")+"</span>":""));return true})})};b.fn.trackCss=function(a,d,c){var c=c||20,e=new Date;return this.each(function(){var f=b(this),
h=function(a){var b=new Date-e;log(b+"&nbsp;::&nbsp;"+a+" = "+f.css(a));b>d&&clearInterval(g)},g=setInterval(function(){if(b.isArray(a))for(var c=0;c<a.length;c++)h(a[c]);else h(a)},c)})};b.fn.readData=function(a,d){if(a==null||d==null)return this;var d=d.split(","),c,e=d.length,f;return this.each(function(){for(c=0;c<e;c++)if((f=b(this).data(d[c]))!=null)a[d[c]]=f})};b.extend(b.support,{orientation:"orientation"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,
cssTable:!b.browser.msie||8<=b.browser.version,cssFilter:b.browser.msie&&8>=b.browser.version,flash:checkFlash("9.0.0")});b.extend(jQuery.easing,{easeOutBack:function(a,b,c,e,f,h){h==null&&(h=1.70158);return e*((b=b/f-1)*b*((h+1)*b+h)+1)+c},easeOutCubic:function(a,b,c,e,f){return e*((b=b/f-1)*b*b+1)+c}});b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.getDim=function(){var a=b(this).eq(0),d={width:a.width(),height:a.height()};if((d.width===0||d.height===
0)&&a.css("display")==="none"){var c=a.css("position"),e=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});d.width=a.width();d.height=a.height();a.css({display:"none",position:c,left:e})}return d};var Q=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var I=Q.length;I;)b.event.fixHooks[Q[--I]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=Q.length;a;)this.addEventListener(Q[--a],X,false);else this.onmousewheel=X},
teardown:function(){if(this.removeEventListener)for(var a=Q.length;a;)this.removeEventListener(Q[--a],X,false);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});var X=function(a){var d=a||window.event,c=[].slice.call(arguments,1),e=0,f=0,h=0,a=b.event.fix(d);a.type="mousewheel";d.wheelDelta?e=d.wheelDelta/120:d.detail&&(e=-d.detail/3);h=e;if(d.axis!==void 0&&
d.axis===d.HORIZONTAL_AXIS){h=0;f=-1*e}d.wheelDeltaY!==void 0&&(h=d.wheelDeltaY/120);d.wheelDeltaX!==void 0&&(f=-1*d.wheelDeltaX/120);c.unshift(a,e,f,h);return(b.event.dispatch||b.event.handle).apply(this,c)},F=function(a,b,c){if(arguments.length>1){var e=new Date;if(b===false||b===null)document.cookie=encodeURIComponent(a)+"=; expires="+e.toGMTString()+"; path=/";else if(/^(string|number|boolean)$/.test(typeof b)){e.setTime(e.getTime()+(typeof c!=="number"?3600:c)*1E3);document.cookie=encodeURIComponent(a)+
"="+String(b)+"; expires="+e.toGMTString()+"; path=/"}return b}if(a)for(var a=a+"=",e=document.cookie.split(";"),f,h=0;h<e.length;h++){f=e[h].trim();if(f.indexOf(a)===0){f=f.substring(a.length);return/^(true|yes)$/.test(f)?true:/^(false|no)$/.test(f)?false:/^([\d.]+)$/.test(f)?parseFloat(f):f}}return null},D={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(a){a=(a||window).location.hash.replace(/^#/,"");try{return b.browser.mozilla?a:decodeURIComponent(a)}catch(d){return a}},
encoder:encodeURIComponent},R={id:"__jQuery_history",init:function(){var a='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';b("body").prepend(a);return this},_document:function(){return b("#"+this.id)[0].contentWindow.document},put:function(a){var b=this._document();b.open();b.close();D.put(a,b)},get:function(){return D.get(this._document())}},da={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(a,d){var c;c=b.extend({unescape:false},d||
{});var e=c.unescape;if(e===true)c=function(a){return a};else{if(c=typeof e=="string"){c=e.split("");var f=RegExp(b.map(c,encodeURIComponent).join("|"),"ig");c=e=function(a){return a.replace(f,decodeURIComponent)}}c=c||typeof e=="function"?function(a){return e(encodeURIComponent(a))}:encodeURIComponent}D.encoder=c;r.callback=a;r._options=d;r._init()},_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=D.get();r._appState=a;r.callback(a);setInterval(r.check,100)},check:function(){var a=
D.get();if(a!=r._appState){r._appState=a;r.callback(a)}},load:function(a){if(a!=r._appState){D.put(a);r._appState=a;r.callback(a)}}},iframeTimer:{_appState:void 0,_init:function(){var a=D.get();r._appState=a;R.init().put(a);r.callback(a);setInterval(r.check,100)},check:function(){var a=R.get(),b=D.get();if(b!=a)if(b==r._appState){r._appState=a;D.put(a);r.callback(a)}else{r._appState=b;R.put(b);r.callback(b)}},load:function(a){if(a!=r._appState){D.put(a);R.put(a);r._appState=a;r.callback(a)}}},hashchangeEvent:{_init:function(){r.callback(D.get());
b(window).on("hashchange",r.check)},check:function(){r.callback(D.get())},load:function(a){D.put(a)}}},r=b.extend({},da.base);r.type=b.browser.msie&&(8>b.browser.version||8>document.documentMode)?"iframeTimer":"onhashchange"in window?"hashchangeEvent":"timer";b.extend(r,da[r.type]);b.history=r;b.fn.addModal=function(a,d,c){typeof a==="string"&&(a=b(a));if(a instanceof jQuery&&a.length){if(!b.isArray(d)){c=d;d=null}c=b.extend({},b.fn.addModal.defaults,c);c.savePosition=c.savePosition&&typeof c.uid!=
UNDEF;var e,f,h,g,p,j,i=0,k;e=b("<div>",{"class":"_m_window",role:"modal"}).css({opacity:0}).appendTo(b(this));b(this).css({position:"relative"});c.darkenBackground||e.css({backgroundImage:"none",backgroundColor:"transparent"});c.uid&&e.find("#"+c.uid).remove();f=b("<div>",{id:c.uid||"_mod_"+Math.floor(Math.random()*1E4),"class":"_m_panel"}).css({width:c.width}).appendTo(e);h=b("<header>",{"class":"_m_head"}).appendTo(f);h.append(b("<h5>",{text:c.title}));var A=function(){g.trigger("removeHint");
k=clearTimeout(k);e.animate({opacity:0},c.speed,function(){e.remove()});return false};if(c.closeOnClickOut&&c.darkenBackground)e.on("click",function(a){b(a.target).hasClass("_m_window")&&A(a);return true});g=b("<a>",{href:NOLINK,"class":"close"}).appendTo(h);if(b.support.touch)g[0].ontouchend=A;else{g.on("click",A);g.addHint(c.closeWindow)}var C=function(a){var d=f.position().left,k=f.position().top,i=getCoords(a);lm=e.width()-f.width()-c.pad;tm=e.height()-f.height()-c.pad;oc=h.css("cursor");h.css({cursor:"move"});
var g=function(a){a=getCoords(a);f.css({left:Math.minMax(c.pad,d+a.x-i.x,lm),top:Math.minMax(c.pad,k+a.y-i.y,tm)});return false},j=function(){b(document).off({mousemove:g,mouseup:j});h.css("cursor",oc);c.savePosition&&B();return false};if(b.support.touch){this.ontouchmove=g;this.ontouchend=j}else b(document).on({mousemove:g,mouseup:j});return false};if(b.support.touch)h[0].ontouchstart=C;else h.on("mousedown",C);p=b("<div>",{"class":"_m_cont"}).appendTo(f);j=b("<div>",{"class":"_m_cont_i"}).append(a).appendTo(p);
if(d&&d.length){for(var H,v=b("<div>",{"class":"buttons"}).appendTo(j),m=function(a){H.each(function(c){b(this).toggleClass("active",c===a)})},n=function(){b(document).off("keydown",r);A()},r=function(a){if(document.activeElement&&document.activeElement.nodeName==="input"||b.isFunction(c.enableKeyboard)&&!c.enableKeyboard())return true;var d=a?a.keyCode:window.event.keyCode;if(d===27){n();return false}if(v){var e=v.find("a.active"),f=H.index(e);switch(d){case 13:case 10:if(b.isFunction(e[0].handler)){e[0].handler.call();
n();break}case 39:m((f+1)%H.length);break;case 37:m(f?f-1:H.length-1);break;default:return a.returnValue=true}return false}return a.returnValue=true},C=0;C<d.length;C++){C&&v.append(" ");a=b("<a>",{href:NOLINK,html:d[C].t}).appendTo(v);if(b.isFunction(d[C].h))a[0].handler=d[C].h;a.on("click",function(){this.handler!=null&&this.handler.call();n();return false})}H=v.children("a");H.last().addClass("active");if(b.isFunction(c.enableKeyboard)||c.enableKeyboard)b(document).on("keydown",r)}if(c.resizable){h.on("dblclick",
function(){var a=[f.position().left,f.position().top,f.width(),f.height()],b=[c.pad,c.pad,e.width()-2*c.pad,e.height()-2*c.pad],d=function(a){f.css({left:Math.minMax(c.gap,a[0],e.width()-a[2]-c.gap),top:Math.minMax(c.gap,a[1],e.height()-a[3]-c.gap),width:a[2],height:a[3]});j.css({height:a[3]-i})};if(a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3])d(f.data("wpos"));else{d(b);f.data("wpos",a)}c.savePosition&&B();return false});d=b("<a>",{"class":"resize"}).appendTo(f);a=function(a){var d=f.width(),e=
f.height(),k=getCoords(a),g=function(a){var a=getCoords(a),b=Math.max(e+a.y-k.y-i,20);f.css({width:Math.max(d+a.x-k.x,60),height:b+i});j.css({height:b});return false},h=function(){b(document).off({mousemove:g,mouseup:h});c.savePosition&&B();return false};if(b.support.touch){this.ontouchmove=g;this.ontouchend=h}else b(document).on({mousemove:g,mouseup:h});return false};if(b.support.touch)d[0].ontouchstart=a;else d.on("mousedown",a)}var o=function(){var a=f.width(),b=f.height(),d=e.width(),k=e.height();
i=b-j.height();if(a&&b&&d&&k){a+2*c.pad>d&&f.css({width:a=d-2*c.pad});if(b+2*c.pad>k){f.css({height:b=k-2*c.pad});j.css({height:k-2*c.pad-i})}f.css({left:Math.max(Math.round((d-a)/2),c.pad),top:Math.max(Math.round((k-b)/2),c.pad)})}},B=function(){F("modalPosition"+c.uid,f.position().left+","+f.position().top+","+f.width()+","+f.height())},E=c.savePosition?F("modalPosition"+c.uid):null;e.css({opacity:0}).show();setTimeout(function(){if(E&&(E=E.split(","))&&b.isArray(E)&&E.length>3){var a=E,d=e.width(),
g=e.height(),n=parseInt(a[0]),v=parseInt(a[1]),C=parseInt(a[2]),a=parseInt(a[3]);(isNaN(n)||isNaN(v)||isNaN(C)||isNaN(a))&&o();i=h.outerHeight()+parseInt(p.css("padding-top"))+parseInt(p.css("padding-bottom"))+parseInt(j.css("padding-top"))+parseInt(j.css("padding-bottom"))+parseInt(p.css("border-top-width"));f.css({position:"absolute",left:Math.minMax(c.pad,n,d-c.pad-60),top:Math.minMax(c.pad,v,g-c.pad-60),width:Math.minMax(60,C,d-n-c.pad),height:a=Math.minMax(60,a,g-v-c.pad)});j.css({height:a-i})}else o();
e.animate({opacity:1},c.speed);c.savePosition&&B();c.autoFade&&(k=setTimeout(A,c.autoFade))},40);return this}};b.fn.addModal.defaults={speed:250,autoFade:0,width:400,resizable:!0,enableKeyboard:!0,closeOnClickOut:!0,closeWindow:"Close window",darkenBackground:!0,savePosition:!0,pad:6};b.fn.addScroll=function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var d,c=b(this),e=b(this).parent(),f,h,g,p,j,i,k,A,C=0,H,v,m,n,r,o;c.css({position:"absolute",width:e.width-20});e.css({overflow:"hidden"});
e.css("position")!=="absolute"&&e.css({position:"relative"});f=b("<div>",{"class":a.upbtn}).appendTo(e);h=b("<div>",{"class":a.dnbtn}).appendTo(e);g=b("<div>",{"class":a.scbar}).appendTo(e);p=b("<div>").appendTo(g);j=f.add(h).add(g);j.hide();var B=function(){return c.position().top},E=function(a){return Math.round((g.height()-6)*-(a==null?B():a)/i)+3},ma=function(){return Math.max(Math.round((g.height()-6)*k/i),a.dragMinSize)},x=function(b){b==null&&(b=B());f.css({opacity:b?1:a.disabledOpacity});
h.css({opacity:b===k-i?a.disabledOpacity:1})},G=function(){return false},y=function(){var a=i,b=k;i=c.height();k=e.height();if(a!==i||b!==k)if(i<=k){c.css({top:0}).off("selectstart",G);j.hide()}else{c.position().top<k-i&&c.css({top:k-i});p.css({top:E(),height:ma()});c.on("selectstart",G);j.show();x()}},J=function(b){clearInterval(A);if(!(k>=i)){b=Math.minMax(k-i,b,0);p.stop(true,true).animate({top:E(b)},a.speed,a.effect);c.stop(true,true).animate({top:b},a.speed,a.effect,function(){x(b)})}};f.on("click",
function(){J(B()+k);return false});h.on("click",function(){J(B()-k);return false});g.on("click",function(a){a.pageY<p.offset().top?J(B()+k):a.pageY>p.offset().top+p.height()&&J(B()-k);return false});if(a.enableMouseWheel)c.on("mousewheel",function(b,c){c&&J(B()+a.wheelIncr*(c<0?-1:1));return false});var u=function(a){p.css({top:Math.minMax(2,Math.round(a.pageY-p.data("my")),g.height()-p.height()-2)});c.css({top:Math.minMax(k-i,-Math.round((p.position().top-3)*i/(g.height()-6)),0)});x();return false},
ta=function(){b(document).off("mousemove",u).off("mouseup",ta);return false};p.on("mousedown",function(a){b(this).data("my",Math.round(a.pageY)-b(this).position().top);b(document).on({mousemove:u,mouseup:ta});return false});var Y=function(a){return C=a.touches&&a.touches.length>0?a.touches[0].clientY:a.clientY?a.clientY:C},D=function(){r=r+Math.round(n/20);var a=m+r;if(a>0||a<o)clearInterval(A);else{c.css({top:a});p.css({top:E(),height:ma()});n=n*0.8;if(Math.abs(n)<10){n=0;clearInterval(A)}}},I=function(a){if(v){if(a=
Y(a)-v){c.data("dragOn",true);c.css({top:Math.minMax(o,H+a,0)});p.css({top:E(),height:ma()})}}else v=Y(a);return false},F=function(a){m=B();var a=Y(a)-v,d=(new Date).getTime()-tT;n=1E3*a/d;A=setInterval(D,50);if(b.support.touch)this.ontouchend=this.ontouchmove=null;else b(document).off({mousemove:I,mouseup:F});setTimeout(function(){c.data("dragOn",false)},20);return Math.abs(a)<4&&d<300},S=function(a){if(k>=i||(a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||c.is(":animated")))return true;
clearInterval(A);te=a;H=B();v=Y(a);tT=(new Date).getTime();r=0;o=k-i;if(b.support.touch){b(a.target).closest("a").focus();this.ontouchmove=I;this.ontouchend=F;return true}b(document).on({mousemove:I,mouseup:F});return false};if(b.support.touch)c[0].ontouchstart=S;else c.on("mousedown",S);b(window).on("resize",function(){clearTimeout(d);d=setTimeout(y,50)});d=setTimeout(y,10);a.refresh&&setInterval(function(){b("[role=gallery]").is(":visible")||y()},a.refresh);c.attr("role","scroll").data("dragOn",
false).on("adjust",y);j.on("selectstart",G);c.find("a").on("setactive",function(){var a=b(this).parent()===c?b(this):b(this).parent(),d=a.position().top,a=a.outerHeight(true),f=c.position().top,k=e.height();if(!(k>c.height())){if(d+a>k-f)f=Math.max(k-a-d,k-c.height());else if(d<-f)f=-d;else return;J(f)}});if(b.isFunction(a.enableKeyboard)||a.enableKeyboard)b(document).on("keydown",function(c){if(document.activeElement&&document.activeElement.nodeName==="INPUT"||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return true;
switch(c?c.keyCode:window.event.keyCode){case 33:J(B()+k);return false;case 34:J(B()-k);return false}return c.returnValue=true})})};b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:300,effect:"swing",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:!0,enableMouseWheel:!0,refresh:0};b.fn.scrollThumbs=function(a){a=b.extend({},b.fn.scrollThumbs.defaults,a);return this.each(function(){var d=b(this),c=b(this).parent(),e=0,f,h,g,p,j,i,k,A,C=b("<div>",{"class":a.scleft}).insertAfter(c),
H=b("<div>",{"class":a.scright}).insertAfter(c),v=function(b){b=b==null?d.position().left:b;C.css({opacity:b<0?1:a.disabledOpacity});H.css({opacity:c.width()<b+d.width()?1:a.disabledOpacity})},m=function(e){var f=c.width(),k=d.width();if(f&&k&&!(f>=k)&&b.isNumeric(e)){e>0?e=0:e<f-k&&(e=f-k);v(e);d.stop(true,false).animate({left:e},a.speed,a.effect)}};C.on("click",function(){m(d.position().left+c.width());return false});H.on("click",function(){m(d.position().left-c.width());return false});d.find("a").on("setactive",
function(){var e=b(this).parent()===d?b(this):b(this).parent(),f=e.position().left,e=e.outerWidth(true),k=Math.round(e*a.headRoom),g=d.position().left,h=c.width();d.find("a.active").removeClass("active");b(this).addClass("active");if(!(h>d.width())){if(f>h-e-k-g)g=Math.max(h-e-k-f,h-d.width());else if(f<-g+k)g=-f+k;else return;m(g)}});if(a.enableMouseWheel)d.on("mousewheel",function(a,b){b&&m(d.position().left+c.width()*(b<0?-1:1));return false});v();var n=function(a){return e=a.touches&&a.touches.length>
0?a.touches[0].clientX:a.clientX?a.clientX:e},r=function(){i=i+Math.round(j/20);var a=p+i;if(a>0||a<k)clearInterval(A);else{d.css({left:a});j=j*0.8;if(Math.abs(j)<10){j=0;clearInterval(A)}}},o=function(a){if(h){if(a=n(a)-h){d.data("dragOn",true);d.css({left:Math.minMax(k,f+a,0)})}}else h=n(a);return false},B=function(a){p=d.position().left;var a=n(a)-h,c=(new Date).getTime()-g;j=1E3*a/c;A=setInterval(r,50);if(b.support.touch)this.ontouchend=this.ontouchmove=null;else b(document).off({mousemove:o,
mouseup:B});setTimeout(function(){d.data("dragOn",false)},20);return Math.abs(a)<4&&c<300},E=function(a){if((a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||d.is(":animated")))return true;clearInterval(A);te=a;f=d.position().left;h=n(a);g=(new Date).getTime();i=0;k=c.width()-d.width();if(b.support.touch){b(a.target).closest("a").focus();this.ontouchmove=o;this.ontouchend=B;return true}b(document).on({mousemove:o,mouseup:B});return false};if(b.support.touch)d[0].ontouchstart=
E;else d.on("mousedown",E);d.attr("role","scroll").data("dragOn",false);d.add(C).add(H).on("selectstart",function(a){a.preventDefault();return false})})};b.fn.scrollThumbs.defaults={scleft:"scleft",scright:"scright",speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:!0};b.fn.addSwipe=function(a,d,c){c=b.extend({},b.fn.addSwipe.defaults,c);return this.each(function(){var e=b(this),f=0,h=0,g=0,p=0,j,i,k,A,C,H,v,m,n,o,r,B;e.attr("draggable","true");var E=function(a){if(a.touches&&
a.touches.length>0){f=a.touches[0].clientX;h=a.touches[0].clientY}else if(a.clientX){f=a.clientX;h=a.clientY}},u=function(a){E(a);g=f;p=h},x=function(a){if(g){E(a);B?e.css({left:f-g+j}):e.css({left:f-g+j,top:h-p+i})}else u(a);return false},G=function(){return false},y=function(n){E(n);var C=(new Date).getTime()-k,n=f-g;if(b.support.touch)this.ontouchend=this.ontouchmove=null;else b(document).off("mousemove",x).off("mouseup click",y);if(m<A)if(Math.abs(n)<c.treshold){B?e.animate({left:j},200):e.animate({left:j,
top:i},200);e.trigger("click")}else{B?e.animate({left:e.position().left+Math.round(333*(f-g)/C)},500,"easeOutCubic"):e.animate({left:e.position().left+Math.round(333*(f-g)/C),top:e.position().top+Math.round(333*(h-p)/C)},500,"easeOutCubic");n<0?b.isFunction(a)&&a.call():b.isFunction(d)&&d.call()}else{B?e.animate({left:Math.minMax(o,e.position().left+Math.round(333*(f-g)/C),c.margin)},500,"easeOutCubic"):e.animate({left:Math.minMax(o,e.position().left+Math.round(333*(f-g)/C),c.margin),top:Math.minMax(r,
e.position().top+Math.round(333*(h-p)/C),c.margin)},500,"easeOutCubic");C=e.position().left;n<0?C+m<H&&b.isFunction(a)&&a.call():C>v&&b.isFunction(d)&&d.call()}return false},J=function(a){if((a.type==="touchstart"||a.type==="touchmove")&&(!a.touches||a.touches.length>1||e.is(":animated")))return true;u(a);I(a)},I=function(a){e.stop(true,false);j=e.position().left;i=e.position().top;k=(new Date).getTime();A=e.parent().outerWidth();C=e.parent().outerHeight();H=A*(1-c.oversizeTreshold);v=A*c.oversizeTreshold;
m=e.outerWidth();n=e.outerHeight();o=A-c.margin-m;r=C-c.margin-n;B=n<=C;if(b.support.touch){this.ontouchmove=x;this.ontouchend=y;return true}e.off("click");e.click(G);b(document).on({mousemove:x,mouseup:y});a.cancelBubble=true;return false};if(b.support.touch)this.ontouchstart=J;else e.on({dragstart:I,mousedown:u});e.on("dragcancel",function(){e.stop(true,false).animate({left:j,top:i},200);return false});e.on("unswipe",function(){if(b.support.touch)this.ontouchstart=this.ontouchend=this.ontouchmove=
null;else{b.isFunction(e.noAction)&&e.off(G);b.isFunction(e.dragStart)&&e.off(I);b(document).off("mousemove",x).off("mouseup",y)}});e.on("selectstart",G)})};b.fn.addSwipe.defaults={treshold:40,oversizeTreshold:0.15,margin:15};var na=ALIGN_TOP=0,V=ALIGN_MIDDLE=1,Ha=ALIGN_BOTTOM=2;b.fn.alignTo=function(a,d){d=b.extend({},b.fn.alignTo.defaults,d);typeof a==="string"&&(a=b(a));if(a instanceof b&&a.length){var c=a.offset(),e=a.outerWidth(),f=a.outerHeight();return b(this).each(function(){var h=b(this).outerWidth(),
g=b(this).outerHeight(),p=Math.round(c.left+d.toX*e/2+(d.toX-1)*d.gap);ry=Math.round(c.top+d.toY*f/2+(d.toY-1)*d.gap);l=Math.round(p-d.posX*h/2);t=Math.round(ry-d.posY*g/2);t<0?d.toX!==V?t=0:d.toY!==ALIGN_BOTTOM&&(t=c.top+a.outerHeight()+d.gap):t+g>b(window).height()&&(d.toX!==V?t=b(window).height()-g:d.toY!==ALIGN_TOP&&(t=c.top-g-d.gap));l<0?d.toY!==ALIGN_MIDDLE?l=0:d.toX!=Ha&&(l=c.left+a.outerWidth()+d.gap):l+h>b(window).width()&&(d.toY!==ALIGN_MIDDLE?l=b(window).width()-h:d.toX!=na&&(l=c.left-
h-d.gap));b(this).css({position:"absolute",left:l,top:t})})}};b.fn.alignTo.defaults={gap:5,posX:V,posY:ALIGN_BOTTOM,toX:V,toY:ALIGN_TOP};b.fn.addHint=function(a,d){if(a&&typeof a!=="string"&&!a.jquery){d=a;a=null}d=b.extend({},b.fn.addHint.defaults,d);return this.each(function(){var c=b(this),e=a||c.attr("title"),f,h=false,g=false,p=!(e&&e.jquery),j;if(e&&e.length){var i=function(){if(p){var a=b("#"+d.id);a.length||(a=b("<div>",{"class":d.id,id:d.id}).hide().appendTo("body"));j=a;j.empty().html(e)}else j=
e.show();j.off("mouseover",k);j.off("mouseout",i);var k=function(){f=clearTimeout(f);h=true;j.stop(true,true).css({opacity:1}).show()},i=function(){if(!g){f=clearTimeout(f);h=false;A()}};j.on("mouseover",k);j.on("mouseout",i);j.find("input").on({focus:function(){g=true;k()},blur:function(){g=false}});j.stop(true,true).alignTo(c,{posX:d.posX,posY:d.posY,toX:d.toX,toY:d.toY});j.css({opacity:0}).show().animate({opacity:1},200);b.support.touch?f=setTimeout(A,d.stay):h=true};c.on("removeHint",function(){k()});
var k=function(){h=false;f=clearTimeout(f);A()},A=function(){!h&&(j&&j.length)&&j.stop(true,false).animate({opacity:0},200,function(){b(this).hide()})};e.jquery?e.addClass(d.id):c.removeAttr("title");c.on(b.support.touch?{touchstart:i}:{"focus mouseenter":i,"blur mouseleave":k})}})};b.fn.addHint.defaults={id:"hint",stay:3E3,posX:V,posY:ALIGN_BOTTOM,toX:V,toY:ALIGN_TOP};b.fn.popupBox=function(a){a=b.extend({},b.fn.popupBox.defaults,a);b("#"+a.id).remove();var d,c=b("<div>",{id:a.id}).appendTo("body"),
e=b("<div>",{"class":"panel"}).appendTo(c);e.css({width:a.width}).append(this);var f=function(){c.fadeOut(250,function(){b(this).remove()})};c.fadeIn(250,function(){d=setTimeout(f,a.length)});e.css({marginTop:Math.max(Math.round((b(window).height()-e.outerHeight())*0.4),0)}).on({mouseover:function(){d=clearTimeout(d);b(this).stop(true,false).css("opacity",1)},mouseout:function(){d=setTimeout(f,a.length)}});return this};b.fn.popupBox.defaults={id:"modal",width:200,length:500};b.fn.alertBox=function(a,
d){if(!b.isArray(a)){d=a;a=null}d=b.extend({},b.fn.alertBox.defaults,d);b("#"+d.id).remove();var c=b("<div>",{id:d.id,role:"alertBox"}).appendTo("body"),e=b("<div>",{"class":"panel"}).appendTo(c),f,h;e.append(this);e.append(b("<a>",{"class":"close",href:NOLINK,text:" "}).on("click",function(){p();return false}));a&&(f=b("<div>",{"class":"buttons"}).appendTo(e));e.css({width:d.width});var g=function(a){if(document.activeElement&&document.activeElement.nodeName==="input"||b.isFunction(d.enableKeyboard)&&
!d.enableKeyboard())return true;var c=a?a.keyCode:window.event.keyCode;if(c===27)p();else if(f){var e=f.find("a.active"),k=h.index(e);switch(c){case 13:case 10:if(b.isFunction(e[0].handler)){e[0].handler.call();p();return false}case 39:j((k+1)%h.length);return false;case 37:j(k?k-1:h.length-1);return false}}return a.returnValue=true},p=function(){b(document).off("keydown",g);c.fadeOut(250,function(){b(this).remove()})},j=function(a){h.each(function(c){b(this).toggleClass("active",c===a)})};if(a&&
a.length){for(var i,k=0;k<a.length;k++){k&&f.append(" ");i=b("<a>",{href:NOLINK}).appendTo(f);i.html(a[k].t);if(b.isFunction(a[k].h))i[0].handler=a[k].h;i.on("click",function(){this.handler!=null&&this.handler.call();p();return false})}h=f.children("a");h.last().addClass("active")}if(b.isFunction(d.enableKeyboard)||d.enableKeyboard)w.on("keydown",keyhandler);c.fadeIn(250);e.css({marginTop:Math.max(Math.round((b(window).height()-e.outerHeight())*0.4),0)});return this};b.fn.alertBox.defaults={id:"modal",
width:420,enableKeyboard:!0};b.fn.equalHeight=function(){var a,d,c=0,e=0,f;return(f=b(this).length)<2?this:this.each(function(h){a=b(this);if(a.offset().top===c){d=d?d.add(a):a;e=Math.max(e,a.height());h===f-1&&e&&d.height(e)}else{d&&e&&d.height(e);d=a;e=a.height();c=a.offset().top}})};b.fn.shareIt=function(a){var a=b.extend({},b.fn.shareIt.defaults,a),d=a.useHash?window.location.href:window.location.href.split("#")[0],c=encodeURIComponent(a.title||b("meta[name=title]").attr("content")||b("title").text()),
e=encodeURIComponent(a.callTxt),f=d.substring(0,d.lastIndexOf("/")+1)+(a.image||encodeURIComponent(b("link[rel=image_src]").attr("href")));return this.each(function(){var h=b(this);this.nodeName==="a"&&h.attr("href",NOLINK);var g=b("<div>",{"class":a.id}).hide();if(location.protocol.startsWith("file:")&&!DEBUG)g.html(a.localWarning);else{a.facebookLike&&!a.useHash&&g.append('<div class="likebtn"><iframe src="http://www.facebook.com/plugins/like.php?href='+d+"&amp;layout=button_count&amp;show_faces=false&amp;width=110&amp;action=like&amp;font=arial&amp;colorscheme="+
a.likeBtnTheme+'&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:20px;" allowTransparency="true"></iframe></div>');a.twitterTweet&&!a.useHash&&g.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+d+"&text="+c+'" style="width:55px; height:20px;"></iframe></div>');if(a.googlePlus&&gapi&&!a.useHash){var p=b('<div class="g-plusone likebtn" data-size="medium" data-annotation="inline" data-href="'+
d+'" data-width="110"></div>').appendTo(g);gapi.plusone.render(p[0])}a.tumblrBtn&&g.append('<div class="likebtn" id="tumblr"><a href="http://www.tumblr.com/share/'+(a.image?"photo?source=":"link?url=")+encodeURIComponent(d)+"&name="+c+'" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</a></div>');a.pinItBtn&&g.append('<div class="likebtn" id="pinitbtn"><iframe src="http://pinit-cdn.pinterest.com/pinit.html?url='+
d+"&amp;media="+f+"&amp;description="+c+'&amp;layout=horizontal" scrolling="no" frameborder="0" style="border:none;width:110px;height:20px;"></iframe></div>');a.facebook&&!a.useHash&&g.append('<a href="http://www.facebook.com/sharer.php?u='+d+"&t="+c+'" class="facebook">Facebook</a>');a.twitter&&g.append('<a href="http://twitter.com/home?status='+e+": "+d+'" class="twitter">Twitter</a>');a.gplus&&g.append(b("<a>",{"class":"gplus",href:"https://plus.google.com/share?url="+d,title:"Share on Google+",
text:"Google+"}).on("click",function(){window.open(this.href,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=980,width=760");return false}));a.digg&&g.append('<a href="http://digg.com/submit?url='+d+'" class="digg">Digg</a>');a.delicious&&g.append('<a href="http://delicious.com/save?url='+d+"&title="+c+'&v=5" class="delicious">Delicious</a>');a.myspace&&g.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+c+"&u="+d+'&l=3" class="myspace">MySpace</a>');a.stumbleupon&&
g.append('<a href="http://www.stumbleupon.com/submit?url='+d+"&title="+c+'" class="stumbleupon">StumbleUpon</a>');a.reddit&&g.append('<a href="http://www.reddit.com/submit?url='+d+'" class="reddit">Reddit</a>');g.children("a").attr("target","_blank");a.email&&g.append('<a href="mailto:?subject='+e+"&body="+c+"%0D%0A"+d+'" class="email">Email</a>')}h.addHint(g.appendTo("body"),a.pos).on("destroy",function(){g.remove()})})};b.fn.shareIt.defaults={id:"shares",useHash:!0,likeBtnTheme:"light",facebookLike:!0,
twitterTweet:!0,googlePlus:!0,tumblrBtn:!0,facebook:!0,twitter:!0,gplus:!0,digg:!0,delicious:!0,myspace:!0,stumbleupon:!0,reddit:!0,email:!0,callTxt:"Found this page",pos:{posX:1,posY:2,toX:1,toY:0},localWarning:"Can't share local albums. Please upload your album first!"};b.fn.addRegions=function(a,d,c){if(a&&a.length&&d){c=b.extend({},b.fn.addRegions.defaults,c);a.width();a.height();for(var e=[],f,h,g,p,j,i=d.split("::"),d=0;d<i.length;d++){f=i[d].split(";");f.length>4&&(f[0].length&&(h=parseFloat(f[1]))!=
null&&(g=parseFloat(f[2]))!=null&&(p=parseFloat(f[3]))!=null&&(j=parseFloat(f[4]))!=null)&&e.push([f[0],(h-p/2)*100+"%",(g-j/2)*100+"%",p*100+"%",j*100+"%"])}return!e.length?this:this.each(function(){var d=b(this),f,g;f=parseInt(d.css("padding-top"));this.nodeName==="a"&&d.attr("href",NOLINK);var h=b("<div>",{"class":c.id}).hide(),i=b("<div>",{"class":c.id+"-cont"}).css({left:f,top:f,right:f,bottom:f});for(I=0;I<e.length;I++){f=b('<a href="'+NOLINK+'">'+e[I][0]+"</a>").appendTo(h);g=b("<a>").css({left:e[I][1],
top:e[I][2],width:e[I][3],height:e[I][4]}).append(b("<span>",{text:e[I][0]})).appendTo(i);f.on({mouseover:function(){i.children("a").eq(b(this).index()).addClass(c.active)},mouseout:function(){i.children("a").eq(b(this).index()).removeClass(c.active)}});if(typeof Search!==UNDEF)g.on("click",function(){Search.start(this);return false})}d.addHint(h.appendTo("body"),c.pos).on("destroy",function(){h.remove()});d.hasClass(c.active)&&i.addClass(c.active);d.on("click",function(){b(this).add(i).toggleClass(c.active)});
a.append(i)})}};b.fn.addRegions.defaults={id:"regions",active:"active",pos:{posX:1,posY:2,toX:1,toY:0}};var Z={flashVideo:[".flv.3gp.3g2",24],flash:[".swf",0],video:[".mp4.f4v.m4v",24],html5Video:[".ogv.webm",30],qtVideo:[".qt.mov.mpg.mpeg.mpe",16],wmVideo:[".avi.wmv.asf.asx.wvx.mkv",64],audio:[".mp3.aac.m4a",24],html5audio:[".ogg.wav.ram.rm",30]},ua=function(a){a=a.getExt();if(!a.length)return null;for(var b in Z)if(Z[b][0].indexOf(a)>=0)return b;return null};b.fn.addPlayer=function(a){var a=b.extend({},
b.fn.addPlayer.defaults,a),d=0,c=a.resPath?a.resPath+"/":"",e=function(a){var b="",c;for(c in a)b=b+('<param name="'+c+'" value="'+a[c]+'">');return b},f=function(a){var c=b(a.target);if(c)if(b.browser.msie){c.hide();(function(){if(c.readyState==4){if(c){for(var a in c)typeof c[a]==="function"&&(c[a]=null);c.remove()}}else setTimeout(arguments.callee,10)})()}else c.remove()},h=function(f,g,k,h,p,m){var v="media"+d++;f.addClass("flplayer").css({width:k,height:h+Z.flashVideo[1]});g="netstreambasepath="+
encodeURIComponent(window.location.href.split("#")[0])+"&id="+v+"&file="+encodeURIComponent(g)+"&image="+encodeURIComponent(p)+(m&&m.length?"&folder="+encodeURIComponent(m):"")+"&autostart="+a.auto+"&loop="+a.loop+"&screencolor="+encodeURIComponent(a.bgcolor)+"&controlbar.position=bottom";v='<object id="'+v+'" name="'+v+'" width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';v=b.browser.msie?v+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+e({movie:c+a.swf}):v+('type="application/x-shockwave-flash" data="'+
c+a.swf+'">');v=v+e({allowfullscreen:true,allowscriptaccess:"always",seamlesstabbing:true,wmode:"opaque",flashvars:g});return b(v).appendTo(f)},g=function(c,e,f,g){var h="em"+d++;c.addClass("emplayer");return b('<embed class="otherplayer" id="'+h+'" src="'+e+'" autostart="'+a.auto+'" loop="'+a.loop+'" width="'+f+'" height="'+g+'">').appendTo(c)},p=function(c,e,f,h,p,m){if((m=m!==UNDEF&&m)&&!Modernizr.audio||!m&&!Modernizr.video)return g(c,e,f,h);var v="ht"+d++,o=Z.html5Video[1];c.addClass("h5player").css({width:f,
height:h+o});c=b(m?"<audio>":"<video>",{id:v,src:e,width:f,height:h,controls:true,preload:"auto",poster:p,autoplay:a.auto,loop:a.loop}).appendTo(c);if(b.isFunction(a.complete))c.on("ended",a.complete);return c};return this.each(function(){var j=b(this),i=null;j.readData(a,"file,folder,width,height,poster");if(a.file){switch(ua(a.file)){case "flashVideo":if(!b.support.flash){j.append(a.flashInstall);break}case "video":if(b.support.flash){i=h(j,a.file,a.width,a.height,a.poster);break}case "html5Video":i=
p(j,a.file,a.width,a.height,a.poster);break;case "qtVideo":var i=a.file,k=a.width,A=a.height,m="qt"+d++,o=Z.qtVideo[1];j.addClass("qtplayer").css({width:k,height:A+o});k='<object id="'+m+'" width="'+k+'" height="'+(A+o)+'" '+(b.browser.msie?'classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0">':'type="video/quicktime" data="'+i+'">');k=k+e({src:i,autoplay:a.auto,scale:a.fit?"tofit":"1",enablejavascript:true,postdomevents:true});
j=b(k).appendTo(j);if(b.isFunction(a.complete))j.on("qt_ended",a.complete);i=j;break;case "wmVideo":i=a.file;k=a.width;A=a.height;m="wm"+d++;o=Z.wmVideo[1];j.addClass("wmplayer").css({width:k,height:A+o});k='<object id="'+m+'" width="'+k+'" height="'+A+'" '+(b.browser.msie?'classid="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6">':'type="application/x-ms-wmp" data="'+i+'">');k=k+e({URL:i,SendPlayStateChangeEvents:true,AutoStart:a.auto,StretchToFit:a.fit});b.browser.msie||(k=k+"<a></a>");el=b(k).appendTo(j);
if(b.isFunction(a.complete))el.on("playStateChange",function(){a.complete.call(this)});i=el;break;case "audio":if(b.support.flash){if(a.swf==b.fn.addPlayer.defaults.swf)i=h(j,a.file,a.width,a.height,a.poster,a.folder);else{i=a.file;k=a.width;A=a.height;m=a.folder;j.addClass("flplayer").css({width:k,height:A});i="file="+encodeURIComponent(i)+(m&&m.length?"&folder="+encodeURIComponent(m):"")+"&autostart="+a.auto+"&loop="+a.loop;k='<object width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';
k=b.browser.msie?k+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+e({movie:c+a.swf}):k+('type="application/x-shockwave-flash" data="'+c+a.swf+'">');k=k+e({wmode:"opaque",flashvars:i});i=b(k).appendTo(j)}break}case "html5audio":i=p(j,a.file,a.width,a.height,a.poster,true);break;default:i=g(j,a.file,a.width,a.height)}i.on("destroy",f)}})};b.fn.addPlayer.defaults={complete:null,swf:"player.swf",width:640,height:480,bgcolor:"#000000",auto:!1,loop:!1,fit:!0,poster:"",folder:"",flashInstall:'<a href="http://get.adobe.com/flashplayer/">Get Adobe Flash Player!</a>'};
b.fn.centerThis=function(a){a=b.extend({},b.fn.centerThis.defaults,a);return this.each(function(){var d=b(this),c=d.find(a.selector);if(c.length){var e,f,h,g,p,j=a.marginLeft+a.padding;e=a.marginRight+a.padding;var i=a.marginTop+a.padding,k=a.marginBottom+a.padding;f=c.data("ow");h=c.data("oh");if(!f||!h){c.data("ow",f=c.width());c.data("oh",h=c.height())}if(!(g=c.data("bw")))c.data("bw",g=parseInt(c.css("border-top-width"))||0);if(!(p=c.data("pw")))c.data("pw",p=parseInt(c.css("padding-top"))||0);
e=(d.innerWidth()||b("body").width())-2*(g+p)-j-e;d=(d.innerHeight()||b("body").height())-2*(g+p)-i-k;if(a.fit&&(f>e||h>d||a.enlarge)){g=Math.min(e/f,d/h);f=Math.round(f*g);h=Math.round(h*g)}g=Math.round((e-f)/2)+j;p=Math.round((d-h)/2)+i;if(a.animate){c.stop(true,false);if(a.preScale&&a.preScale!==1){var k=f*a.preScale,A=h*a.preScale;c.css({left:Math.round((e-k)/2)+j,top:Math.round((d-A)/2)+i,width:Math.round(k),height:Math.round(A)})}else a.init&&c.css({left:g,top:p});c.animate({left:g,top:p,width:f,
height:h},{duration:a.speed,easing:a.effect,complete:a.complete})}else{c.css({left:g,top:p,width:f,height:h});b.isFunction(a.complete)&&a.complete.call(this)}}})};b.fn.centerThis.defaults={selector:".main",speed:500,fit:!0,enlarge:!0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:!1,animate:!1,effect:"swing",complete:null};b.fn.setupShop=function(a){var a=b.extend({},b.fn.setupShop.defaults,a),d;b.fn.addInput=function(a,d,f,h){var g;return!a||d==null?this:this.each(function(){g=
b("<input>",{type:f||"text"}).appendTo(b(this));g.attr("name",a);g.addClass(a);g.val(typeof d==="string"?d.stripQuote():d);h&&g.prop(h,h)})};b.fn.addSelect=function(a,e,f){return!a.length?this:this.each(function(){var h=b(this),h=b("<select>").appendTo(h);for(d=0;d<a.length;d++)h.append(b("<option>",{val:a[d].val,text:a[d].key+" ("+e+" "+a[d].val+")"}));b.isFunction(f)&&h.change(f)})};return this.each(function(){var c=b(this),e,f,h;c.readData(a,"gateway,id,currency,handling,options,file");if(!(a.id==
null||a.options==null||a.file==null)){id=a.gateway=="paypal"?{form:"paypal",seller:"business",currency:"currency_code",title:"item_name",select:"item_number",price:"amount",copies:"quantity",shipprice:"shipping",shipprice2:"shipping2",handling:"handling_cart",shopUrl:"shopping_url"}:{form:"google_checkout",currency:"item_currency_1",title:"item_name_1",select:"item_description_1",price:"item_price_1",copies:"item_quantity_1",shipmethod:"ship_method_name_1",shipprice:"ship_method_price_1",shipcurrency:"ship_method_currency_1"};
var g=a.options.split("::"),p,j=[];for(d=0;d<g.length;d++){p=g[d].split("=");p.length>1&&j.push({key:p[0],val:p[1]})}a.id=a.id.replace("|","@");var i=function(c){var d=f.children("[name^="+id.shipprice+"]");if(c===null||c===false||!b.isNumeric(c))a.gateway==="paypal"?d.remove():d.val(0);else if(d.length)d.val(c);else if(a.gateway==="paypal"){f.addInput(id.shipprice,c,"hidden");a.shippingFlat||f.addInput(id.shipprice2,c,"hidden")}},g=function(){var b=e.length?e.children("select").eq(0):false;if(b&&
b.length){var c,b=b.val().split("+");q=e.children("[name=copies]").val()||1;if(a.quantityCap&&q>a.quantityCap)e.children("[name=copies]").val(q=a.quantityCap);(c=e.children("[name=total]"))&&c.val((b[0]*q).toFixed(2));(c=f.children("[name="+id.price+"]"))&&c.val(b[0]);(c=f.children("[name="+id.copies+"]"))&&c.val(q);i(b.length>1?b[1]:null);(c=f.children("[name="+id.select+"]"))&&c.val(e.find("option:selected").text())}};e=b("<form>",{name:"shopping",method:"post"}).appendTo(c);e.addSelect(j,a.currency,
g);a.quantityCap!=1&&e.append("x").addInput("copies",1);e.append("=").addInput("total",j[0].val.split("+")[0],"text","readonly");e.children("[name=copies]").css({width:"3em"}).change(g);e.children("[name=total]").css({width:"5em"});e.append(a.currency);if(a.gateway==="paypal"){h=j[0].val.split("+");f=b("<form>",{name:id.form,target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(c);f.addInput("cmd","_cart","hidden");f.addInput("add",1,"hidden");f.addInput(id.seller,
a.id,"hidden");f.addInput(id.copies,1,"hidden");f.addInput(id.price,h[0],"hidden");f.addInput(id.currency,a.currency,"hidden");i(h.length>1?h[1]:null);a.handling!=null&&b.isNumeric(a.handling)&&f.addInput(id.handling,a.handling,"hidden");f.addInput(id.title,decodeURIComponent(a.path+a.file),"hidden");f.addInput(id.select,j[0].key+" ("+a.currency+" "+j[0].val+")","hidden");f.addInput(id.shopUrl,window.location.href,"hidden");f.addInput("charset","utf-8","hidden");f.addInput("lc",a.locale,"hidden");
f.append(b("<input>",{id:"shopAdd",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_cart_SM.gif",alt:"Add to Cart"}));h=b("<form>",{"class":"view",name:"paypalview",target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(c);h.addInput("cmd","_cart","hidden");h.addInput("display",1,"hidden");h.addInput(id.seller,a.id,"hidden");h.addInput("lc",a.locale,"hidden");h.append(b("<input>",{id:"shopView",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_viewcart_SM.gif",
alt:"View Cart"}))}else if(a.gateway==="google"){g=a.id.match(/(\d+)/)[0];f=b("<form>",{name:id.form,target:a.target,action:"https://checkout.google.com/cws/v2/Merchant/"+g+"/checkoutForm",method:"post","accept-charset":"utf-8"}).appendTo(c);f.addInput(id.title,decodeURIComponent(a.path+a.file),"hidden");f.addInput(id.select,j[0].key,"hidden");f.addInput(id.copies,1,"hidden");f.addInput(id.price,j[0].val.split("+")[0],"hidden");f.addInput(id.currency,a.currency,"hidden");if(a.shipping!=null&&b.isNumeric(a.shipping)){f.addInput(id.shipmethod,
"normal","hidden");f.addInput(id.shipprice,a.shipping,"hidden");f.addInput(id.shipcurrency,a.currency,"hidden")}f.addInput("_charset_","","hidden");f.append(b("<input>",{id:"shopAdd",type:"image",name:"Google Checkout",alt:"Fast checkout through Google",src:"http://checkout.google.com/buttons/checkout.gif?merchant_id="+g+"&w=160&h=43&style=trans&variant=text&loc=en_US",height:43,width:160}))}f.add(h).find("input[name=submit]").on("submit",function(){window.open("",a.target,"width=960,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no");
return true})}})};b.fn.setupShop.defaults={target:"ShoppingCart",currency:"EUR",gateway:"paypal",locale:"US",quantityCap:0,shippingFlat:!1};var va=function(a){if(a==null)return null;if(typeof a==="string"){a=/^(-?[\d.]+),\s?(-?[\d.]+)$/.exec(a);return new google.maps.LatLng(a[1],a[2])}return new google.maps.LatLng(a[0],a[1])};b.fn.setupMap=function(a){if(!google||!google.maps)return this;var a=b.extend({},b.fn.setupMap.defaults,a),d=a.markerPath==null?{}:{icon:new google.maps.MarkerImage(a.markerPath,
new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,24),new google.maps.Point(17,0),new google.maps.Point(8,24)),zIndex:9999},c=a.markerPath==null?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,21),new google.maps.Point(45,3),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,21),new google.maps.Point(62,3),new google.maps.Point(8,
24))};return this.each(function(){var e=b(this),f,h,g,p,j;e.readData(a,"type,zoom,map,label,resPath,markers");var i=function(){if(e.data("fresh"))if(e.is(":visible")&&!e.parents(":hidden").length&&e.width()&&e.height()){clearTimeout(j);e.width(e.parents(".cont").width()-30);google.maps.event.trigger(g,"resize");g.setCenter(f);e.data("fresh",false)}else j=setTimeout(i,200)};p&&p.length&&p.remove();p=b("<div>").css({position:"absolute",top:"-9000px",width:e.width(),height:e.height()}).appendTo("body");
e.data("fresh",true).on({adjust:i,destroy:function(){g.getParentNode().removeChild(g);b(window).unbind("resize",i)}});if(a.markers&&a.markers.length&&a.curr!=null)f=a.markers[a.curr].map;else if(a.map){f=va(a.map);h=a.label}else return;setTimeout(function(){var k=new google.maps.Map(p[0],{zoom:a.zoom,center:f,mapTypeId:a.type.toLowerCase()});google.maps.event.addListener(k,"maptypeid_changed",function(){b.fn.setupMap.defaults.type=k.getMapTypeId()});google.maps.event.addListener(k,"zoom_changed",
function(){b.fn.setupMap.defaults.zoom=k.getZoom()});if(a.markers&&a.markers.length>1)for(var i,j,m=Math.min(a.curr+a.range,a.markers.length),o=Math.max(a.curr-a.range,0);o<m;o++){j=a.markers[o];i={position:j.map,map:k,title:j.label,zIndex:o};if(o==a.curr)i=new google.maps.Marker(b.extend(i,d));else{i=new google.maps.Marker(b.extend(i,c));if(jQuery.isFunction(a.click)&&j.link){i.link=j.link;google.maps.event.addListener(i,"click",function(){a.click.call(this)})}}}else i=new google.maps.Marker(b.extend({position:f,
map:k,title:h},d));p.css({top:0}).appendTo(e);g=k},20);b(window).on("resize",function(){clearTimeout(j);e.data("fresh",true);j=setTimeout(i,100)})})};b.fn.setupMap.defaults={type:"roadmap",zoom:16,range:30};b.fn.markFoldersNew=function(a){a=b.extend({},b.fn.markFoldersNew.defaults,a);if(a.markNewDays){var d=Math.round((new Date).getTime()/864E5);return this.each(function(){d-parseInt(b(this).data("modified")||0)<=a.markNewDays&&b(this).after(a.newLabel)})}};b.fn.markFoldersNew.defaults={markNewDays:7,
newLabel:"NEW"};b.fn.fullScreen=function(a){var b=function(a,b){b=b==="FullScreen"&&m==="webkit"?m+"Is"+b:m&&m+b||b.substr(0,1).toLowerCase()+b.substr(1);return typeof a[b]==="function"?a[b]():a[b]};return typeof a===UNDEF?b(this[0],"FullScreen"):this.each(function(){s=b(this,"FullScreen");a?s||b(this,"RequestFullScreen"):s&&b(this,"CancelFullScreen")})};b.fn.turtleHelp=function(a,d){var a=b.extend({},b.fn.turtleHelp.defaults,a),d=b.extend({},b.fn.turtleHelp.texts,d),c=b(a.templ.template(d.help)),
e=function(){b("body").addModal(c,{uid:"help",title:a.title.template(d.help),width:680})};if(a.useF1&&!b.support.touch)b(document).on("keydown",function(c){if(document.activeElement&&document.activeElement.nodeName==="INPUT"||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard()||b("#help:visible").length)return true;if((c?c.keyCode:window.event.keyCode)===112){e();return false}return c.returnValue=true});return this.each(function(){b(this).on("click",function(){e();return false})})};b.fn.turtleHelp.defaults=
{useF1:!0};b.fn.turtleHelp.texts={help:"Using Turtle gallery;Top <b>navigation</b> bar with <b>Home</b> button;<b>Up</b> one level <em>Up arrow</em>;Author or company <b>information</b>;<b>Share</b> and <b>Like</b> buttons for social networking;<b>Search</b> button;Start slideshow <em>Numpad *</em>;Previous image <em>Left arrow</em>;Back to index page <em>Esc</em>;Toggle zoom (fit/1:1) <em>Numpad +</em>;Toggle info window <em>Numpad -</em>;Toggle thumbnail scoller;Start / Stop slideshow <em>Numpad *</em>;Next image <em>Right arrow</em>;Swipe for previous / next image".split(";")};
b.fn.turtleGallery=function(a,d,c){a=b.extend({},b.fn.turtleGallery.defaults,a);d=b.extend({},b.fn.turtleGallery.texts,d);c=b.extend({},b.fn.turtleGallery.ids,c);setTimeout(function(){if(!a.licensee&&(typeof _jaShowAds==UNDEF||_jaShowAds)&&location.protocol.startsWith("http")&&!F("ls")){var c=a.resPath+"/logo.png";b(new Image).load(function(){var a=b("<div>").css({background:"url("+c+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"}).html("<h3>Turtle skin</h3><p>Unlicensed</p>");
b("body").addModal(a,{width:220,autoFade:500});F("ls",true)}).attr("src",c)}},1E3);for(var e=["thumbsOn","infoOn","metaOn","mapOn","regionsOn","shopOn","shareOn","printOn","fitImage"],f=function(b,c){location.protocol.startsWith("file")||F(b,c);a[b]=c},h,g=0;g<e.length;g++)if(h=F(e[g]))a[e[g]]=h;if(b.support.touch)a.preScale=false;b.fn.setupMap.defaults.zoom=a.mapZoom;b.fn.setupMap.defaults.type=a.mapType;b.fn.setupMap.defaults.markerPath=a.markerPath;b.fn.setupShop.defaults.gateway=a.shopGateway;
b.fn.setupShop.defaults.id=a.shopId;b.fn.setupShop.defaults.path=(a.albumName||"")+": "+a.relPath;b.fn.setupShop.defaults.currency=a.shopCurrency||"EUR";b.fn.setupShop.defaults.handling=a.shopHandling||null;b.fn.setupShop.defaults.locale=a.shopLocale||"US";b.fn.setupShop.defaults.quantityCap=a.shopQuantityCap||0;b.fn.addPlayer.defaults.bgcolor=b("body").css("background-color").rgb2hex();b.fn.addPlayer.defaults.fit=a.videoFit;b.fn.addPlayer.defaults.auto=a.videoAuto;b.fn.centerThis.defaults.fit=a.fitImage;
b.fn.centerThis.defaults.animate=a.transitions;b.fn.centerThis.defaults.padding=a.fitPadding;b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;for(g in a.shares)b.fn.shareIt.defaults[g]=a.shares[g];b.fn.shareIt.defaults.callTxt=d.checkOutThis;var p=function(b){var d=b.data(c.caption);if(d)return d.stripHTML();return(b=b.closest("a"))?b.attr("href").replace(RegExp("^"+a.slides+"\\/"),""):""},j='<span class="'+c.newItem+'">'+d.newItem+"</span>",i=Math.round((new Date).getTime()/
864E5);return this.each(function(){var e=b(this).find("li > a"),g,h,m,o,r,n={},u,I,B,E,D,x=null,G=null,y=0,J,F,K=b(window).width(),Y=b(window).height(),Q=[],V=function(d){if(document.activeElement&&(document.activeElement.nodeName==="INPUT"||document.activeElement.nodeName==="TEXTAREA")||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return true;var f=d?d.keyCode:window.event.keyCode;if(g.is(":visible"))switch(f){case 27:S();break;case 37:d=b("."+c.main);f=b("."+c.img);if(d.length)if(d.position().left>=
a.fitPadding)ha();else{f=Math.round(f.width()*0.8);d.animate({left:Math.min(d.position().left+f,a.fitPadding)},a.scrollDuration)}break;case 38:d=b("."+c.main);f=b("."+c.img);if(d.length&&!(d.position().top>a.fitPadding)){f=Math.round(f.width()*0.8);d.animate({top:Math.min(d.position().top+f,a.fitPadding)},a.scrollDuration)}break;case 39:d=b("."+c.main);f=b("."+c.img);if(d.length)if(d.position().left+d.outerWidth()<=f.width()-a.fitPadding)U();else{var h=Math.round(f.width()*0.8);d.animate({left:Math.max(d.position().left-
h,f.width()-a.fitPadding-d.outerWidth())},a.scrollDuration)}break;case 40:d=b("."+c.main);f=b("."+c.img);if(d.length&&!(d.position().top+d.outerHeight()<=f.height()-a.fitPadding)){h=Math.round(f.width()*0.8);d.animate({top:Math.max(d.position().top-h,f.height()-a.fitPadding-d.outerHeight())},a.scrollDuration)}break;case 97:case 35:L(e.length-1);break;case 103:case 36:L(0);break;case 106:case 179:if(J)W();else{if(a.slideshowFullScreen){E=false;b("html").fullScreen(true)}ba()}break;case 107:a.fitImage?
wa():xa();break;case 109:if(a.infoOn||a.thumbsOn){ya();za()}else{Aa();Ba()}break;default:return d.returnValue=true}else switch(f){case 13:case 10:L();break;case 27:R();break;case 37:y=(y?y:e.length)-1;T();break;case 38:y&&a.cols&&(y=Math.max(0,y-a.cols));T();break;case 39:y=(y+1)%e.length;T();break;case 40:y<e.length-1&&a.cols&&(y=Math.min(e.length-1,y+a.cols));T();break;case 97:case 35:y=e.length-1;T();break;case 103:case 36:y=0;T();break;case 106:case 179:if(a.slideshowFullScreen){E=false;b("html").fullScreen(true)}L();
ba();break;default:return d.returnValue=true}},R=function(){window.location.href=a.uplink||"../"},S=function(){var c=b("[role=main]");if(g.is(":visible")){W();a.slideshowFullScreen&&b("html").fullScreen(false);if(a.skipIndex)R();else{if(c.length&&c.is(":hidden")){c.children().andSelf().css({visibility:"visible",display:"block"});c.find(".folders>ul>li").equalHeight();c.find(".thumbs>ul>li p").length&&c.find(".thumbs>ul>li").equalHeight();c.find("[role=scroll]").trigger("adjust")}a.transitions?g.fadeOut(a.speed):
g.hide();a.hash!=="no"&&b.history.load("")}}else c.length&&c.is(":hidden")&&c.children().andSelf().css({visibility:"visible",display:"block"});c.find("[role=scroll]").data("dragOn",false)},aa=function(){var a=e.eq(y).attr("href");return a&&a.substr(a.lastIndexOf("/")+1)},T=function(b){e.filter("."+c.active).removeClass(c.active);e.eq(y).addClass(c.active);!a.skipIndex&&(typeof b===UNDEF||b===false)&&e.eq(y).trigger("setactive");I.eq(y).trigger("setactive")},ha=function(){W();y?L(y-1):a.afterLast===
"startover"?L(e.length-1):x.find("."+c.main).trigger("dragcancel")},U=function(){if(y<e.length-1){X();L(y+1)}else if(a.afterLast==="startover"||J&&a.slideshowLoop){X();L(0)}else{if(a.afterLast==="onelevelup"){if(a.uplink){R();return}}else if(a.afterLast==="backtoindex"){if(!a.skipIndex){S();return}}else if(a.afterLast==="ask"){W();var f=Array({t:d.startOver,h:function(){L(0)}});a.uplink&&f.push({t:a.level>0?d.upOneLevel:d.homepageLinkText||d.backToHome,h:function(){R()}});a.skipIndex||f.push({t:d.backToIndex,
h:function(){S()}});b("body").addModal(b("<p>",{text:d.atLastPageQuestion}),f,{uid:"dialog",title:d.atLastPage,width:480,resizable:false})}x.find("."+c.main).trigger("dragcancel")}},X=function(){if(J){clearInterval(J);J=setInterval(U,a.slideshowDelay)}},ba=function(){n.play.hide();n.pause.showin();J=setInterval(U,a.slideshowDelay);M()},W=function(){n.pause.hide();n.play.showin();J=clearInterval(J);M()},da=function(){if(!E){o.stop(true,false).css({opacity:0.7}).fadeIn(200,function(){b.support.cssFilter&&
o.css("filter",null)});D=setTimeout(function(){M()},1500)}},M=function(){if(E)D=setTimeout(function(){M()},500);else{D=clearTimeout(D);o.fadeOut(300)}},na=function(){if(o.is(":visible")){D=clearTimeout(D);o.fadeOut(300)}else da()},ya=function(){if(a.infoOn){n.hideInfo.hide();n.showInfo.showin();a.transitions?r.animate({bottom:-r.outerHeight()},500,function(){r.hide()}):r.css({bottom:-r.outerHeight()}).hide();M();f("infoOn",false)}},Aa=function(){if(!a.infoOn){n.showInfo.hide();n.hideInfo.showin();
r.is(":hidden")&&r.show().css({bottom:-r.outerHeight()});var b=function(){r.children("."+c.map).trigger("adjust")};if(a.transitions)r.animate({bottom:0},500,b);else{r.show().css({bottom:0});b()}M();f("infoOn",true)}},za=function(){if(a.thumbsOn){n.hideThumbs.hide();n.showThumbs.showin();a.transitions?m.animate({top:-u.outerHeight()-10},500):m.css({top:-u.outerHeight()-10});x&&a.fitFreespace&&x.centerThis({fit:a.fitImage,marginTop:0});M();f("thumbsOn",false)}},Ba=function(){if(!a.thumbsOn){n.showThumbs.hide();
n.hideThumbs.showin();a.transitions?m.animate({top:0},500):m.css({top:0});x&&a.fitFreespace&&x.centerThis({fit:a.fitImage,marginTop:u.outerHeight()});M();f("thumbsOn",true)}},ea=function(){return a.fitFreespace&&m.position().top>=0?u.outerHeight()||0:0},wa=function(){n.noresize.hide();n.resize.showin();x.centerThis({fit:false,marginTop:ea()});M();f("fitImage",false)},xa=function(){n.resize.hide();n.noresize.showin();x.centerThis({fit:true,marginTop:ea()});M();f("fitImage",true)},Ca=function(a){if(!(a<
0||a>=e.length)){var d=e.eq(a).children("img").eq(0);!d.data(c.isvideo)&&(!d.data(c.isother)&&!d.data("cached")&&(s=d.data(c.src)))&&b("<img>").on("load",function(){d.data("cached",true)}).attr({src:s})}},ia=function(a){a.trigger("destroy");a.find("."+c.share+"-"+c.icon).trigger("destroy");a.find("."+c.map).trigger("destroy")},L=function(i){g.is(":hidden")&&(a.transitions?g.fadeIn(a.speed):g.show());if(typeof i!==UNDEF&&i!=null){var j;if(i==null)j=y;else if(typeof i==="number")j=Math.minMax(0,i,e.length);
else if((j=e.index(i))<0)j=I.index(i);i=j}else i=y;if(!(x&&x.data("curr")===i)){var n,m=e.eq(i),o,u,m=m.children("img").eq(0);if(m.length){if(x){if(G&&G.length){G.stop();ia(G);G.remove()}G=x;G.css({zIndex:0});G.find("."+c.main).trigger("unswipe").off("touchstart");G.unmousewheel()}(n=g.children("."+c.img).not(x)).length&&n.stop().remove();x=b("<div>",{"class":c.img}).css({zIndex:1,display:"none"}).data({curr:i}).on("click",function(a){if(b(a.target).hasClass("img")){S();return false}}).appendTo(g);
h.css({opacity:0,display:"block"}).animate({opacity:1});y=i;T();var v=b("<div>",{"class":c.main});if(m.data(c.isother)||!(o=m.data(c.src))){n=Math.max(m.data(c.width)||g.width()-160,280);j=Math.max(m.data(c.height)||g.height()-120,200);u=m.clone();v.addClass(c.other);if((o=m.data(c.content))&&(o=o.trim()).length)v.css({width:n,height:j}).append(o.startsWith("http://")?b("<iframe>",{width:"100%",height:"100%",src:o,frameborder:0,allowfullscreen:"allowfullscreen"}):o);else{v.append(b("<a>",{href:m.data(c.link),
target:"_blank"}));v.append(b("<p>",{text:d.clickToOpen}));v.children("a:first").append(u)}oa(v)}else if(m.data(c.isvideo)||m.data(c.isaudio)){n=m.data(c.width)||g.width()-160;j=m.data(c.height)||g.height()-120;var B=J;B&&W();if(m.data(c.isvideo)){o=g.width()-40;u=g.height()-40;var E=m.data(c.link),E=ua(E);j=j+(E&&Z[E][1]||0);if(n>o||j>u){o=Math.min(o/n,u/j);n=Math.round(n*o);j=Math.round(j*o)}}else{n=Math.max(280,m.attr("width")||0);j=Math.max(280,m.attr("height")||0)}v.addClass(c.other).css({width:n,
height:j}).data({ow:n,oh:j});el=v.addPlayer({complete:function(){if(B){U();ba()}},file:m.data(c.link),resPath:a.resPath,poster:m.data(c.poster)||m.attr("src"),auto:a.videoAuto,fit:a.videoFit,width:n,height:j});v.data("media",el);oa(v)}else{n=m.data(c.width);j=m.data(c.height);u=b(new Image);v.addClass(c.image).append(u).css({width:n,height:j}).data({ow:n,oh:j});u.on("load",function(){m.data("cached",true);oa(v)}).attr({src:o,width:n||"auto",height:j||"auto"})}var z=m;r=b("<div>",{"class":c.bottom});
x.append(r);var D=b("<div>",{"class":c.cont}).appendTo(r),F=b("<nav>").appendTo(D),H,M;n=Math.round(x.width()*0.8)-30;D.width()>n&&D.width(n);a.showImageNumbers&&D.append('<div class="nr"><strong>'+(i+1)+"</strong> / "+e.length+"</div>");(H=z.data(c.caption))&&D.append(H);var K,N;n=[c.meta,c.map,c.shop,c.share,c.print,c.comment];for(o=0;o<n.length;o++){N=n[o];if(z.data(N)!=null){K=b("<div>",{"class":c.panel+" "+c[N]}).data("rel",N).appendTo(D);K.append(b("<div>",{"class":c.icon}));i=b("<a>",{href:NOLINK,
"class":N+"-"+c.icon,text:" "}).appendTo(F);i.data("rel",N).addHint(d[N+"Btn"]||N);i.on("click",function(){var d=b(this).data("rel"),e=D.children("."+d),g=e.is(":hidden");b(this).toggleClass(c.active,g);if(d===c.map){var h=function(){g&&e.children("."+c.mapcont).trigger("adjust")};if(a.transitions)e.slideToggle("fast",h);else{e.toggle();setTimeout(h,50)}}else a.transitions?e.slideToggle("fast"):e.toggle();f(d+"On",g)})}}if(!z.data(c.isvideo)&&!z.data(c.isaudio)&&!z.data(c.isother)){if(a.fotomotoOn){var O=
b("<a>",{href:NOLINK,"class":c.fotomoto+"-"+c.icon,text:" "}).appendTo(F);O.addHint(location.protocol.startsWith("file:")?d.locationWarning:d.fotomotoHint);setTimeout(function(){if(typeof FOTOMOTO!==UNDEF&&!location.protocol.startsWith("file:"))O.on("click",function(){FOTOMOTO.API.showWindow(10,z.attr("src").replace(a.thumbs+"/",a.slides+"/"));return false})},a.speed)}if(z.data(c.regions)){i=b("<a>",{href:NOLINK,"class":c.regions+"-"+c.icon,text:" "}).appendTo(F);a[c.regions+"On"]&&i.addClass(c.active);
i.on("click",function(){f(c.regions+"On",!b(this).hasClass(c.active))})}}if(!a.rightClickProtect&&(H=z.data(c.link))){i=b("<a>",{href:H,"class":c.link+"-"+c.icon,target:"_blank",text:" "}).appendTo(F);i.addHint("<strong>"+(z.data(c.isoriginal)?d.original:d.hiRes)+"</strong><br><small>"+d.saveTip+"</small>")}if(a.shareOn){var P=b("<a>",{href:NOLINK,"class":c.share+"-"+c.icon,text:" "}).appendTo(F);M=a.hash==="number"?y+1:aa();setTimeout(function(){P.shareIt({hash:M,title:z.data(c.caption).stripHTML(),
image:z.data(c.src)})},a.speed)}x.append(r);D.children("."+c.panel).each(function(){K=b(this);if((N=K.data("rel"))&&(H=z.data(N))!=null){if(N===c.map){var d=b("<div>",{"class":c.mapcont}).appendTo(K);d.width(D.width()-30);a.mapAll?d.setupMap({click:function(){L(this.link)},markers:Q,curr:parseInt(z.data(c.mapid))}):d.setupMap({map:H,label:p(z)});setTimeout(function(){d.trigger("adjust")},a.speed)}else N===c.shop?K.addClass("clearfix").setupShop({file:z.data(c.src),options:H}):K.append(H);a[N+"On"]?
F.children("a."+N+"-icon").addClass(c.active):K.hide()}});F.html().length||F.remove();a.infoOn||r.hide()}}},oa=function(d){if(a.transitions){h.stop(true,false).animate({opacity:0},{duration:100,complete:function(){b(this).hide()}});if(G){var f=G;G.stop(true,false).animate({opacity:0},{duration:a.speed/2,complete:function(){ia(f);f.remove()}});G=null}}else{h.hide();if(G){G.stop();ia(G);G.remove()}}var g=d.hasClass(c.image);x.children().not("."+c.bottom).remove();x.append(d);if(a.rightClickProtect)d.on("contextmenu",
function(a){a.preventDefault();return false});if(a.enableMouseWheel)x.on("mousewheel",function(a,b){b>0?ha():U();return false});setTimeout(function(){if(b.support.touch)d.on("touchstart",na);else if(e.length>1&&g)d.on("click",function(){U();return false});e.length>1&&d.addSwipe(function(){b(this).trigger("unswipe");U()},function(){b(this).trigger("unswipe");ha()})},a.speed/2);a.transitions?x.css({opacity:0,display:"block"}).animate({opacity:1},{duration:a.speed,complete:b.browser.cssFilter?function(){x.css({filter:""})}:
null}).centerThis({init:true,speed:Math.round(a.speed*0.75),marginTop:ea(),preScale:g&&a.preScale,animate:g&&a.preScale&&a.preScale!=1,fit:a.fitImage}):x.show().centerThis({init:true,marginTop:ea(),fit:a.fitImage});var i=y,j=x.find("nav a."+c.regions+"-icon").eq(0);if(j.length){i=e.eq(i).find("img:first");j.addRegions(x.find("."+c.main).eq(0),i.data(c.regions))}Ca(y+1);Ca(y-1);if(a.hash==="number")b.history.load(y+1);else if(a.hash==="fileName")(j=aa())&&b.history.load(j)};if(e.length){if(a.header!=
null){var z=b(a.header);if(z.length){if(a.showStart){var ja=b("<div>",{"class":c.startBtn,text:" "}).appendTo(z),Da=b("<div>",{"class":c.startTxt,text:d.startSlideshow}).appendTo(z);ja.on({mouseenter:function(){Da.stop(true,false).css({opacity:1}).hide().fadeIn(250)},mouseleave:function(){Da.stop(true,false).fadeOut(500)},click:function(){a.slideshowFullScreen&&b("html").fullScreen(true);L();ba();return false}})}ja=z.find("."+c.parent+">a");if(ja.length)a.uplink=ja.attr("href")}}g=b("<div>",{"class":c.gallery}).attr("role",
"gallery").appendTo("body");h=b("<div>",{"class":c.wait}).appendTo(g);var O=m=b("<div>",{"class":c.navigation}).appendTo(g),ca,$,pa,P,fa,Ea,qa=0,ga,z=b("<div>",{"class":c.scrollbox}).appendTo(O);ga=b("<div>",{"class":"wrap"}).appendTo(z);ga=b("<ul>",{"class":c.cont}).appendTo(ga);e.each(function(d){O=b(this);if(a.rightClickProtect)O.on("contextmenu",function(a){a.preventDefault();return false});P=O.find("img").eq(0);if((fa=O.attr("href"))&&P.length){P.data(c.src,fa.replace(/\.(php|html*)/,"."+P.data(c.ext)));
Ea=a.thumbs+"/"+fa.substring(fa.lastIndexOf("/")+1,fa.lastIndexOf("."))+"."+(P.data(c.thumbExt)||P.data(c.ext));$=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(ga));pa=b("<img>").appendTo($);P.attr("src").endsWith("/"+a.loadImg)?P.add(pa).attr("src",Ea):pa.attr("src",P.attr("src"));if((ca=O.attr("title"))&&ca.length)O.add($).addHint(ca);else{ca=O.next();ca.length&&$.addHint(ca.html())}a.markNewDays&&i-parseInt(P.data(c.modified)||0)<=a.markNewDays&&O.add($).append(j);O.on("click",function(){if(b(this).parents("[role=scroll]").data("dragOn")===
true)return false;if(!b(this).hasClass(c.active)&&x&&x.length){x.stop();ia(x);x.remove()}L(e.eq(d));return false});$.on("click",function(){if(b(this).parents("[role=scroll]").data("dragOn")===true)return false;b(this).hasClass(c.active)||L(e.eq(d));b(this).trigger("active");return false});qa=qa+$.outerWidth(true)}});ga.width(qa).scrollThumbs({enableMouseWheel:a.enableMouseWheel});u=z;I=u.find(".cont a");z=b("<nav>",{"class":"controls clearfix"}).appendTo(m);n.prev=b("<a>",{"class":c.prev,title:d.previousPicture}).appendTo(z);
n.prev.on("click",function(){W();ha();return false});n.up=b("<a>",{"class":c.up,title:a.skipIndex?d.upOneLevel:d.backToIndex}).appendTo(z);n.up.on("click",function(){W();S();return false});n.noresize=b("<a>",{"class":c.noresize,title:d.oneToOneSize}).appendTo(z);n.noresize.on("click",function(){wa();return false});n.resize=b("<a>",{"class":c.resize,title:d.fitToScreen}).appendTo(z);n.resize.on("click",function(){xa();return false});if(a.fitImage){n.resize.hide();n.noresize.showin()}else{n.noresize.hide();
n.resize.showin()}n.hideInfo=b("<a>",{"class":c.hideInfo,title:d.hideInfo}).appendTo(z);n.hideInfo.on("click",function(){ya();return false});n.showInfo=b("<a>",{"class":c.showInfo,title:d.showInfo}).appendTo(z);n.showInfo.on("click",function(){Aa();return false});if(a.infoOn){n.showInfo.hide();n.hideInfo.showin()}else{n.hideInfo.hide();n.showInfo.showin()}n.hideThumbs=b("<a>",{"class":c.hideThumbs,title:d.hideThumbs}).appendTo(z);n.hideThumbs.on("click",function(){za();return false});n.showThumbs=
b("<a>",{"class":c.showThumbs,title:d.showThumbs}).appendTo(z);n.showThumbs.on("click",function(){Ba();return false});if(a.thumbsOn){n.showThumbs.hide();n.hideThumbs.showin()}else{n.hideThumbs.hide();n.showThumbs.showin()}n.play=b("<a>",{"class":c.play,title:d.startAutoplay}).appendTo(z);n.play.on("click",function(){if(a.slideshowFullScreen){E=false;b("html").fullScreen(true)}ba();return false});n.pause=b("<a>",{"class":c.pause,title:d.stopAutoplay}).appendTo(z);n.pause.on("click",function(){W();
return false});if(a.slideshowAuto){n.play.hide();n.pause.showin()}else{n.pause.hide();n.play.showin()}n.next=b("<a>",{"class":c.next,title:d.nextPicture}).appendTo(z);n.next.on("click",function(){X();U();return false});var ra=0;z.children().each(function(){b(this).css("display")!=="none"&&(ra=ra+b(this).outerWidth())});z.width(ra);z.children("a").addHint();o=z;a.thumbsOn||m.css("top",-u.outerHeight()-10);u.on({mouseenter:function(){M();B=true},mouseleave:function(){B=false}});o.on({mouseenter:function(){E=
true;b(this).stop(true,false).fadeTo(200,1)},mouseleave:function(){E=false;b(this).stop(true,false).fadeTo(200,a.controlbarOpacity)}});var Fa=0,Ga=0;if(!b.support.touch)g.on("mousemove",function(a){if(!B&&(Fa-a.clientY||Ga-a.clientX)){da();Ga=a.clientX;Fa=a.clientY}});if(a.mapAll){var ka,la,sa;e.each(function(a){ka=b(this).find("img:first");if(ka.length&&(la=ka.data("map"))&&(la=va(la))){sa=p(ka);Q.push({map:la,label:a+1+(sa?": "+sa.stripHTML():""),link:b(this)})}})}if(!b.support.touch&&(b.isFunction(a.enableKeyboard)||
a.enableKeyboard))b(window).on("keydown",V);a.hash&&a.hash!=="no"&&b.history.init(function(c){var d,f;if(f=c)if(f=c.length){if(a.hash==="number")c=(parseInt(c)||1)-1;else a:{var g;for(f=0;f<e.length;f++)if((g=e.eq(f).attr("href"))&&g.substring(g.lastIndexOf("/")+1)===c){c=f;break a}c=-1}f=(d=c)>=0&&d<e.length}if(f){L(d);a.slideshowAuto=false}else{S();b.browser.msie&&setTimeout(function(){b("[role=main]").show();b(".folders>ul>li").equalHeight();b("[role=scroll]").trigger("adjust")},10)}});T(true);
if(a.slideshowAuto){a.slideshowFullScreen&&b("html").fullScreen(true);L(y);ba()}else a.skipIndex&&L(y);b(window).on("resize",function(){clearTimeout(F);F=setTimeout(function(){var c=b(window).width(),d=b(window).height();if(c!==K||d!==Y){x&&x.centerThis({fit:a.fitImage,marginTop:ea()});K=c;Y=d}},100)})}})};b.fn.turtleGallery.defaults={hash:"fileName",resPath:"",relPath:"",level:0,skipIndex:!1,showStart:!0,speed:600,controlbarOpacity:0.7,transitions:!0,preScale:0.95,slideshowDelay:3E3,slideshowLoop:!1,
slideshowAuto:!1,slideshowFullScreen:!1,markNewDays:30,afterLast:"ask",infoOn:!0,showImageNumbers:!0,thumbsOn:!1,fitImage:!0,fitShrinkonly:!0,fitFreespace:!0,fitPadding:15,borderWidth:10,rightClickProtect:!1,metaOn:!1,mapOn:!1,shopOn:!1,fotomotoOn:!1,shareOn:!1,printOn:!1,enableKeyboard:!0,enableMouseWheel:!0,numberLinks:!1,videoAuto:!0,videoFit:!0,videoWidth:640,videoHeight:480,scrollDuration:1E3};b.fn.turtleGallery.texts={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",
atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",previousPicture:"Previous picture",nextPicture:"Next picture",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",closeWindow:"Close window",clickToOpen:"Click to open this document with the associated viewer",
download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",locationWarning:"Works only when uploaded"};b.fn.turtleGallery.ids={gallery:"gallery",navigation:"navigation",scrollbox:"scrollbox",active:"active",
parent:"parent",bottom:"bottom",img:"img",main:"main",image:"image",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",fotomoto:"fotomoto",share:"share",print:"print",comment:"comment",link:"link",poster:"poster",isoriginal:"isoriginal",content:"content",width:"width",height:"height",src:"src",ext:"ext",thumbExt:"thumbext",regions:"regions",isvideo:"isvideo",isaudio:"isaudio",
isother:"isother",modified:"modified",startBtn:"startbtn",startTxt:"starttxt",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",newItem:"newlabel",showHint:"showhint"}})(jQuery);